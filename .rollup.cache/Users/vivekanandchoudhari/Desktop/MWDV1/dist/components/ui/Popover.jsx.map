{"version":3,"file":"Popover.jsx","sourceRoot":"","sources":["../../../src/components/ui/Popover.tsx"],"names":[],"mappings":"AAAA,YAAY,CAAA;;AAEZ,OAAO,KAAK,EAAE,EAAE,QAAQ,EAAE,MAAM,EAAE,SAAS,EAAE,aAAa,EAAE,UAAU,EAAE,MAAM,OAAO,CAAA;AACrF,OAAO,EAAE,IAAI,EAAE,MAAM,MAAM,CAAA;AAqB3B,MAAM,cAAc,GAAG,aAAa,CAI1B,IAAI,CAAC,CAAA;AAEf,MAAM,UAAU,OAAO,CAAC,EAAE,IAAI,GAAG,KAAK,EAAE,YAAY,EAAE,QAAQ,EAAgB;IAC5E,MAAM,UAAU,GAAG,MAAM,CAAc,IAAI,CAAC,CAAA;IAE5C,OAAO,CACL,CAAC,cAAc,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;YAC9B,IAAI;YACJ,YAAY,EAAE,YAAY,IAAI,CAAC,GAAG,EAAE,GAAE,CAAC,CAAC;YACxC,UAAU;SACX,CAAC,CACA;MAAA,CAAC,QAAQ,CACX;IAAA,EAAE,cAAc,CAAC,QAAQ,CAAC,CAC3B,CAAA;AACH,CAAC;AAED,MAAM,UAAU,cAAc,CAAC,EAA6D;QAA7D,EAAE,OAAO,EAAE,QAAQ,EAAE,OAAO,OAAiC,EAA5B,KAAK,cAAtC,kCAAwC,CAAF;IACnE,MAAM,OAAO,GAAG,UAAU,CAAC,cAAc,CAAC,CAAA;IAE1C,MAAM,WAAW,GAAG,CAAC,CAAsC,EAAE,EAAE;QAC7D,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAG,CAAC,CAAC,CAAA;QACZ,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,YAAY,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,CAAA;IACtC,CAAC,CAAA;IAED,IAAI,OAAO,IAAI,KAAK,CAAC,cAAc,CAAC,QAAQ,CAAC,EAAE,CAAC;QAC9C,OAAO,KAAK,CAAC,YAAY,CAAC,QAAQ,kBAChC,GAAG,EAAE,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,UAAU,EACxB,OAAO,EAAE,WAAW,IACjB,KAAK,EACR,CAAA;IACJ,CAAC;IAED,OAAO,CACL,CAAC,MAAM,CACL,GAAG,CAAC,CAAC,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,UAAgD,CAAC,CAC/D,OAAO,CAAC,CAAC,WAAW,CAAC,CACrB,IAAI,KAAK,CAAC,CAEV;MAAA,CAAC,QAAQ,CACX;IAAA,EAAE,MAAM,CAAC,CACV,CAAA;AACH,CAAC;AAED,MAAM,UAAU,cAAc,CAAC,EAQT;QARS,EAC7B,IAAI,GAAG,QAAQ,EACf,KAAK,GAAG,QAAQ,EAChB,UAAU,GAAG,CAAC,EACd,WAAW,GAAG,CAAC,EACf,SAAS,EACT,QAAQ,OAEY,EADjB,KAAK,cAPqB,uEAQ9B,CADS;IAER,MAAM,OAAO,GAAG,UAAU,CAAC,cAAc,CAAC,CAAA;IAC1C,MAAM,UAAU,GAAG,MAAM,CAAiB,IAAI,CAAC,CAAA;IAC/C,MAAM,CAAC,QAAQ,EAAE,WAAW,CAAC,GAAG,QAAQ,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAA;IAE7D,SAAS,CAAC,GAAG,EAAE;QACb,IAAI,CAAC,CAAA,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,IAAI,CAAA,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,OAAO,IAAI,CAAC,UAAU,CAAC,OAAO;YAAE,OAAM;QAEhF,MAAM,cAAc,GAAG,GAAG,EAAE;YAC1B,MAAM,OAAO,GAAG,OAAO,CAAC,UAAU,CAAC,OAAO,CAAA;YAC1C,MAAM,OAAO,GAAG,UAAU,CAAC,OAAO,CAAA;YAClC,IAAI,CAAC,OAAO,IAAI,CAAC,OAAO;gBAAE,OAAM;YAEhC,MAAM,WAAW,GAAG,OAAO,CAAC,qBAAqB,EAAE,CAAA;YACnD,MAAM,WAAW,GAAG,OAAO,CAAC,qBAAqB,EAAE,CAAA;YACnD,MAAM,aAAa,GAAG,MAAM,CAAC,UAAU,CAAA;YACvC,MAAM,cAAc,GAAG,MAAM,CAAC,WAAW,CAAA;YAEzC,IAAI,GAAG,GAAG,CAAC,CAAA;YACX,IAAI,IAAI,GAAG,CAAC,CAAA;YAEZ,mCAAmC;YACnC,QAAQ,IAAI,EAAE,CAAC;gBACb,KAAK,KAAK;oBACR,GAAG,GAAG,WAAW,CAAC,GAAG,GAAG,WAAW,CAAC,MAAM,GAAG,UAAU,CAAA;oBACvD,MAAK;gBACP,KAAK,QAAQ;oBACX,GAAG,GAAG,WAAW,CAAC,MAAM,GAAG,UAAU,CAAA;oBACrC,MAAK;gBACP,KAAK,MAAM;oBACT,IAAI,GAAG,WAAW,CAAC,IAAI,GAAG,WAAW,CAAC,KAAK,GAAG,UAAU,CAAA;oBACxD,MAAK;gBACP,KAAK,OAAO;oBACV,IAAI,GAAG,WAAW,CAAC,KAAK,GAAG,UAAU,CAAA;oBACrC,MAAK;YACT,CAAC;YAED,sBAAsB;YACtB,IAAI,IAAI,KAAK,KAAK,IAAI,IAAI,KAAK,QAAQ,EAAE,CAAC;gBACxC,QAAQ,KAAK,EAAE,CAAC;oBACd,KAAK,OAAO;wBACV,IAAI,GAAG,WAAW,CAAC,IAAI,GAAG,WAAW,CAAA;wBACrC,MAAK;oBACP,KAAK,QAAQ;wBACX,IAAI,GAAG,WAAW,CAAC,IAAI,GAAG,WAAW,CAAC,KAAK,GAAG,CAAC,GAAG,WAAW,CAAC,KAAK,GAAG,CAAC,GAAG,WAAW,CAAA;wBACrF,MAAK;oBACP,KAAK,KAAK;wBACR,IAAI,GAAG,WAAW,CAAC,KAAK,GAAG,WAAW,CAAC,KAAK,GAAG,WAAW,CAAA;wBAC1D,MAAK;gBACT,CAAC;YACH,CAAC;iBAAM,CAAC;gBACN,QAAQ,KAAK,EAAE,CAAC;oBACd,KAAK,OAAO;wBACV,GAAG,GAAG,WAAW,CAAC,GAAG,GAAG,WAAW,CAAA;wBACnC,MAAK;oBACP,KAAK,QAAQ;wBACX,GAAG,GAAG,WAAW,CAAC,GAAG,GAAG,WAAW,CAAC,MAAM,GAAG,CAAC,GAAG,WAAW,CAAC,MAAM,GAAG,CAAC,GAAG,WAAW,CAAA;wBACrF,MAAK;oBACP,KAAK,KAAK;wBACR,GAAG,GAAG,WAAW,CAAC,MAAM,GAAG,WAAW,CAAC,MAAM,GAAG,WAAW,CAAA;wBAC3D,MAAK;gBACT,CAAC;YACH,CAAC;YAED,uCAAuC;YACvC,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,aAAa,GAAG,WAAW,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAA;YACzE,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,cAAc,GAAG,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAA;YAEzE,WAAW,CAAC,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC,CAAA;QAC5B,CAAC,CAAA;QAED,cAAc,EAAE,CAAA;QAChB,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,cAAc,CAAC,CAAA;QACjD,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,cAAc,CAAC,CAAA;QAEjD,OAAO,GAAG,EAAE;YACV,MAAM,CAAC,mBAAmB,CAAC,QAAQ,EAAE,cAAc,CAAC,CAAA;YACpD,MAAM,CAAC,mBAAmB,CAAC,QAAQ,EAAE,cAAc,CAAC,CAAA;QACtD,CAAC,CAAA;IACH,CAAC,EAAE,CAAC,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,UAAU,EAAE,WAAW,CAAC,CAAC,CAAA;IAEzD,SAAS,CAAC,GAAG,EAAE;QACb,MAAM,kBAAkB,GAAG,CAAC,CAAa,EAAE,EAAE;YAC3C,IACE,CAAA,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,IAAI;gBACb,UAAU,CAAC,OAAO;gBAClB,CAAC,UAAU,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAc,CAAC;gBAC9C,OAAO,CAAC,UAAU,CAAC,OAAO;gBAC1B,CAAC,OAAO,CAAC,UAAU,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAc,CAAC,EACtD,CAAC;gBACD,OAAO,CAAC,YAAY,CAAC,KAAK,CAAC,CAAA;YAC7B,CAAC;QACH,CAAC,CAAA;QAED,MAAM,YAAY,GAAG,CAAC,CAAgB,EAAE,EAAE;YACxC,IAAI,CAAC,CAAC,GAAG,KAAK,QAAQ,KAAI,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,IAAI,CAAA,EAAE,CAAC;gBACxC,OAAO,CAAC,YAAY,CAAC,KAAK,CAAC,CAAA;YAC7B,CAAC;QACH,CAAC,CAAA;QAED,IAAI,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,IAAI,EAAE,CAAC;YAClB,QAAQ,CAAC,gBAAgB,CAAC,WAAW,EAAE,kBAAkB,CAAC,CAAA;YAC1D,QAAQ,CAAC,gBAAgB,CAAC,SAAS,EAAE,YAAY,CAAC,CAAA;QACpD,CAAC;QAED,OAAO,GAAG,EAAE;YACV,QAAQ,CAAC,mBAAmB,CAAC,WAAW,EAAE,kBAAkB,CAAC,CAAA;YAC7D,QAAQ,CAAC,mBAAmB,CAAC,SAAS,EAAE,YAAY,CAAC,CAAA;QACvD,CAAC,CAAA;IACH,CAAC,EAAE,CAAC,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,IAAI,CAAC,CAAC,CAAA;IAEnB,IAAI,CAAC,CAAA,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,IAAI,CAAA;QAAE,OAAO,IAAI,CAAA;IAE/B,OAAO,CACL,CAAC,GAAG,CACF,GAAG,CAAC,CAAC,UAAU,CAAC,CAChB,SAAS,CAAC,CAAC,IAAI,CACb,sFAAsF,EACtF,yDAAyD,EACzD,8CAA8C,EAC9C,SAAS,CACV,CAAC,CACF,KAAK,CAAC,CAAC;YACL,GAAG,EAAE,QAAQ,CAAC,GAAG;YACjB,IAAI,EAAE,QAAQ,CAAC,IAAI;SACpB,CAAC,CACF,IAAI,KAAK,CAAC,CAEV;MAAA,CAAC,QAAQ,CACX;IAAA,EAAE,GAAG,CAAC,CACP,CAAA;AACH,CAAC;AAED,uCAAuC;AACvC,MAAM,UAAU,UAAU;IACxB,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAA;IAEvC,OAAO;QACL,IAAI;QACJ,OAAO;QACP,YAAY,EAAE,OAAO;QACrB,KAAK,EAAE,GAAG,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC;QAC3B,MAAM,EAAE,GAAG,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC;KACrC,CAAA;AACH,CAAC","sourcesContent":["'use client'\n\nimport React, { useState, useRef, useEffect, createContext, useContext } from 'react'\nimport { clsx } from 'clsx'\n\nexport interface PopoverProps {\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n  children: React.ReactNode\n}\n\nexport interface PopoverTriggerProps extends React.HTMLAttributes<HTMLButtonElement> {\n  asChild?: boolean\n  children: React.ReactNode\n}\n\nexport interface PopoverContentProps extends React.HTMLAttributes<HTMLDivElement> {\n  side?: 'top' | 'right' | 'bottom' | 'left'\n  align?: 'start' | 'center' | 'end'\n  sideOffset?: number\n  alignOffset?: number\n  children: React.ReactNode\n}\n\nconst PopoverContext = createContext<{\n  open: boolean\n  onOpenChange: (open: boolean) => void\n  triggerRef: React.RefObject<HTMLElement>\n} | null>(null)\n\nexport function Popover({ open = false, onOpenChange, children }: PopoverProps) {\n  const triggerRef = useRef<HTMLElement>(null)\n\n  return (\n    <PopoverContext.Provider value={{ \n      open, \n      onOpenChange: onOpenChange || (() => {}), \n      triggerRef \n    }}>\n      {children}\n    </PopoverContext.Provider>\n  )\n}\n\nexport function PopoverTrigger({ asChild, children, onClick, ...props }: PopoverTriggerProps) {\n  const context = useContext(PopoverContext)\n  \n  const handleClick = (e: React.MouseEvent<HTMLButtonElement>) => {\n    onClick?.(e)\n    context?.onOpenChange(!context.open)\n  }\n\n  if (asChild && React.isValidElement(children)) {\n    return React.cloneElement(children, {\n      ref: context?.triggerRef,\n      onClick: handleClick,\n      ...props\n    })\n  }\n\n  return (\n    <button\n      ref={context?.triggerRef as React.RefObject<HTMLButtonElement>}\n      onClick={handleClick}\n      {...props}\n    >\n      {children}\n    </button>\n  )\n}\n\nexport function PopoverContent({\n  side = 'bottom',\n  align = 'center',\n  sideOffset = 4,\n  alignOffset = 0,\n  className,\n  children,\n  ...props\n}: PopoverContentProps) {\n  const context = useContext(PopoverContext)\n  const contentRef = useRef<HTMLDivElement>(null)\n  const [position, setPosition] = useState({ top: 0, left: 0 })\n\n  useEffect(() => {\n    if (!context?.open || !context.triggerRef.current || !contentRef.current) return\n\n    const updatePosition = () => {\n      const trigger = context.triggerRef.current\n      const content = contentRef.current\n      if (!trigger || !content) return\n\n      const triggerRect = trigger.getBoundingClientRect()\n      const contentRect = content.getBoundingClientRect()\n      const viewportWidth = window.innerWidth\n      const viewportHeight = window.innerHeight\n\n      let top = 0\n      let left = 0\n\n      // Calculate position based on side\n      switch (side) {\n        case 'top':\n          top = triggerRect.top - contentRect.height - sideOffset\n          break\n        case 'bottom':\n          top = triggerRect.bottom + sideOffset\n          break\n        case 'left':\n          left = triggerRect.left - contentRect.width - sideOffset\n          break\n        case 'right':\n          left = triggerRect.right + sideOffset\n          break\n      }\n\n      // Calculate alignment\n      if (side === 'top' || side === 'bottom') {\n        switch (align) {\n          case 'start':\n            left = triggerRect.left + alignOffset\n            break\n          case 'center':\n            left = triggerRect.left + triggerRect.width / 2 - contentRect.width / 2 + alignOffset\n            break\n          case 'end':\n            left = triggerRect.right - contentRect.width + alignOffset\n            break\n        }\n      } else {\n        switch (align) {\n          case 'start':\n            top = triggerRect.top + alignOffset\n            break\n          case 'center':\n            top = triggerRect.top + triggerRect.height / 2 - contentRect.height / 2 + alignOffset\n            break\n          case 'end':\n            top = triggerRect.bottom - contentRect.height + alignOffset\n            break\n        }\n      }\n\n      // Ensure content stays within viewport\n      left = Math.max(8, Math.min(left, viewportWidth - contentRect.width - 8))\n      top = Math.max(8, Math.min(top, viewportHeight - contentRect.height - 8))\n\n      setPosition({ top, left })\n    }\n\n    updatePosition()\n    window.addEventListener('resize', updatePosition)\n    window.addEventListener('scroll', updatePosition)\n\n    return () => {\n      window.removeEventListener('resize', updatePosition)\n      window.removeEventListener('scroll', updatePosition)\n    }\n  }, [context?.open, side, align, sideOffset, alignOffset])\n\n  useEffect(() => {\n    const handleClickOutside = (e: MouseEvent) => {\n      if (\n        context?.open &&\n        contentRef.current &&\n        !contentRef.current.contains(e.target as Node) &&\n        context.triggerRef.current &&\n        !context.triggerRef.current.contains(e.target as Node)\n      ) {\n        context.onOpenChange(false)\n      }\n    }\n\n    const handleEscape = (e: KeyboardEvent) => {\n      if (e.key === 'Escape' && context?.open) {\n        context.onOpenChange(false)\n      }\n    }\n\n    if (context?.open) {\n      document.addEventListener('mousedown', handleClickOutside)\n      document.addEventListener('keydown', handleEscape)\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside)\n      document.removeEventListener('keydown', handleEscape)\n    }\n  }, [context?.open])\n\n  if (!context?.open) return null\n\n  return (\n    <div\n      ref={contentRef}\n      className={clsx(\n        'fixed z-50 min-w-[8rem] rounded-md border border-mw-gray-200 dark:border-mw-gray-700',\n        'bg-white dark:bg-mw-gray-800 p-4 shadow-md outline-none',\n        'animate-in fade-in-0 zoom-in-95 duration-200',\n        className\n      )}\n      style={{\n        top: position.top,\n        left: position.left,\n      }}\n      {...props}\n    >\n      {children}\n    </div>\n  )\n}\n\n// Utility hook for controlled popovers\nexport function usePopover() {\n  const [open, setOpen] = useState(false)\n  \n  return {\n    open,\n    setOpen,\n    onOpenChange: setOpen,\n    close: () => setOpen(false),\n    toggle: () => setOpen(prev => !prev)\n  }\n}\n"]}