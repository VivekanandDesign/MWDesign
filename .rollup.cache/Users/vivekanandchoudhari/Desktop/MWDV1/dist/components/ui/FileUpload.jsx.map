{"version":3,"file":"FileUpload.jsx","sourceRoot":"","sources":["../../../src/components/ui/FileUpload.tsx"],"names":[],"mappings":"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","sourcesContent":["'use client'\n\nimport React, { useState, useRef, useCallback } from 'react'\nimport { Upload, X, File, Image, FileText } from 'lucide-react'\n\nfunction cn(...classes: (string | undefined | null | false)[]): string {\n  return classes.filter(Boolean).join(' ')\n}\n\ninterface FileUploadProps {\n  onFilesChange?: (files: File[]) => void\n  onError?: (error: string) => void\n  multiple?: boolean\n  accept?: string\n  maxSize?: number // in bytes\n  maxFiles?: number\n  disabled?: boolean\n  className?: string\n  children?: React.ReactNode\n  variant?: 'dropzone' | 'button' | 'input'\n  showPreview?: boolean\n}\n\ninterface FileItemProps {\n  file: File\n  onRemove?: () => void\n  showPreview?: boolean\n}\n\ninterface DragDropZoneProps {\n  onDrop: (files: File[]) => void\n  accept?: string\n  multiple?: boolean\n  disabled?: boolean\n  children: React.ReactNode\n  className?: string\n}\n\nfunction formatFileSize(bytes: number): string {\n  if (bytes === 0) return '0 Bytes'\n  const k = 1024\n  const sizes = ['Bytes', 'KB', 'MB', 'GB']\n  const i = Math.floor(Math.log(bytes) / Math.log(k))\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]\n}\n\nfunction getFileIcon(file: File) {\n  if (file.type.startsWith('image/')) {\n    return <Image className=\"w-4 h-4\" />\n  }\n  if (file.type.includes('text/') || file.type.includes('application/json')) {\n    return <FileText className=\"w-4 h-4\" />\n  }\n  return <File className=\"w-4 h-4\" />\n}\n\nfunction FileItem({ file, onRemove, showPreview = true }: FileItemProps) {\n  const [previewUrl, setPreviewUrl] = useState<string | null>(null)\n\n  React.useEffect(() => {\n    if (showPreview && file.type.startsWith('image/')) {\n      const url = URL.createObjectURL(file)\n      setPreviewUrl(url)\n      return () => URL.revokeObjectURL(url)\n    }\n  }, [file, showPreview])\n\n  return (\n    <div className=\"flex items-center p-3 bg-mw-gray-50 dark:bg-mw-gray-800 rounded-lg border border-mw-gray-200 dark:border-mw-gray-700\">\n      <div className=\"flex-shrink-0 mr-3\">\n        {previewUrl ? (\n          <img\n            src={previewUrl}\n            alt={file.name}\n            className=\"w-10 h-10 object-cover rounded\"\n          />\n        ) : (\n          <div className=\"w-10 h-10 bg-mw-gray-200 dark:bg-mw-gray-700 rounded flex items-center justify-center text-mw-gray-500\">\n            {getFileIcon(file)}\n          </div>\n        )}\n      </div>\n      \n      <div className=\"flex-1 min-w-0\">\n        <p className=\"text-sm font-medium text-mw-gray-900 dark:text-white truncate\">\n          {file.name}\n        </p>\n        <p className=\"text-xs text-mw-gray-500 dark:text-mw-gray-400\">\n          {formatFileSize(file.size)}\n        </p>\n      </div>\n      \n      {onRemove && (\n        <button\n          onClick={onRemove}\n          className=\"flex-shrink-0 ml-2 p-1 text-mw-gray-400 hover:text-mw-gray-600 dark:hover:text-mw-gray-200\"\n        >\n          <X className=\"w-4 h-4\" />\n        </button>\n      )}\n    </div>\n  )\n}\n\nfunction DragDropZone({\n  onDrop,\n  accept,\n  multiple = false,\n  disabled = false,\n  children,\n  className\n}: DragDropZoneProps) {\n  const [isDragOver, setIsDragOver] = useState(false)\n\n  const handleDragEnter = useCallback((e: React.DragEvent) => {\n    e.preventDefault()\n    e.stopPropagation()\n    if (!disabled) {\n      setIsDragOver(true)\n    }\n  }, [disabled])\n\n  const handleDragLeave = useCallback((e: React.DragEvent) => {\n    e.preventDefault()\n    e.stopPropagation()\n    setIsDragOver(false)\n  }, [])\n\n  const handleDragOver = useCallback((e: React.DragEvent) => {\n    e.preventDefault()\n    e.stopPropagation()\n  }, [])\n\n  const handleDrop = useCallback((e: React.DragEvent) => {\n    e.preventDefault()\n    e.stopPropagation()\n    setIsDragOver(false)\n\n    if (disabled) return\n\n    const files = Array.from(e.dataTransfer.files)\n    \n    // Filter files by accept type if specified\n    const filteredFiles = accept \n      ? files.filter(file => {\n          const acceptTypes = accept.split(',').map(type => type.trim())\n          return acceptTypes.some(type => {\n            if (type.startsWith('.')) {\n              return file.name.toLowerCase().endsWith(type.toLowerCase())\n            }\n            return file.type.match(new RegExp(type.replace('*', '.*')))\n          })\n        })\n      : files\n\n    const finalFiles = multiple ? filteredFiles : filteredFiles.slice(0, 1)\n    onDrop(finalFiles)\n  }, [onDrop, accept, multiple, disabled])\n\n  return (\n    <div\n      onDragEnter={handleDragEnter}\n      onDragLeave={handleDragLeave}\n      onDragOver={handleDragOver}\n      onDrop={handleDrop}\n      className={cn(\n        'relative',\n        isDragOver && 'opacity-75',\n        className\n      )}\n    >\n      {children}\n    </div>\n  )\n}\n\nexport function FileUpload({\n  onFilesChange,\n  onError,\n  multiple = false,\n  accept,\n  maxSize,\n  maxFiles,\n  disabled = false,\n  className,\n  children,\n  variant = 'dropzone',\n  showPreview = true\n}: FileUploadProps) {\n  const [files, setFiles] = useState<File[]>([])\n  const fileInputRef = useRef<HTMLInputElement>(null)\n\n  const validateFiles = useCallback((newFiles: File[]): File[] => {\n    const validFiles: File[] = []\n\n    for (const file of newFiles) {\n      // Check file size\n      if (maxSize && file.size > maxSize) {\n        onError?.(`File ${file.name} is too large. Maximum size is ${formatFileSize(maxSize)}.`)\n        continue\n      }\n\n      // Check file count\n      if (maxFiles && files.length + validFiles.length >= maxFiles) {\n        onError?.(`Maximum ${maxFiles} files allowed.`)\n        break\n      }\n\n      validFiles.push(file)\n    }\n\n    return validFiles\n  }, [files.length, maxSize, maxFiles, onError])\n\n  const handleFilesChange = useCallback((newFiles: File[]) => {\n    const validFiles = validateFiles(newFiles)\n    \n    if (validFiles.length > 0) {\n      const updatedFiles = multiple ? [...files, ...validFiles] : validFiles\n      setFiles(updatedFiles)\n      onFilesChange?.(updatedFiles)\n    }\n  }, [files, multiple, validateFiles, onFilesChange])\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const selectedFiles = Array.from(e.target.files || [])\n    handleFilesChange(selectedFiles)\n    \n    // Reset input value to allow selecting the same file again\n    if (fileInputRef.current) {\n      fileInputRef.current.value = ''\n    }\n  }\n\n  const removeFile = (index: number) => {\n    const updatedFiles = files.filter((_, i) => i !== index)\n    setFiles(updatedFiles)\n    onFilesChange?.(updatedFiles)\n  }\n\n  const openFileDialog = () => {\n    fileInputRef.current?.click()\n  }\n\n  if (variant === 'button') {\n    return (\n      <div className={className}>\n        <input\n          ref={fileInputRef}\n          type=\"file\"\n          multiple={multiple}\n          accept={accept}\n          onChange={handleInputChange}\n          disabled={disabled}\n          className=\"hidden\"\n        />\n        \n        <button\n          onClick={openFileDialog}\n          disabled={disabled}\n          className=\"inline-flex items-center px-4 py-2 border border-mw-gray-300 dark:border-mw-gray-600 rounded-md shadow-sm text-sm font-medium text-mw-gray-700 dark:text-mw-gray-300 bg-white dark:bg-mw-gray-800 hover:bg-mw-gray-50 dark:hover:bg-mw-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-mw-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n        >\n          <Upload className=\"w-4 h-4 mr-2\" />\n          {children || 'Choose Files'}\n        </button>\n\n        {files.length > 0 && (\n          <div className=\"mt-4 space-y-2\">\n            {files.map((file, index) => (\n              <FileItem\n                key={`${file.name}-${index}`}\n                file={file}\n                onRemove={() => removeFile(index)}\n                showPreview={showPreview}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n    )\n  }\n\n  if (variant === 'input') {\n    return (\n      <div className={className}>\n        <input\n          ref={fileInputRef}\n          type=\"file\"\n          multiple={multiple}\n          accept={accept}\n          onChange={handleInputChange}\n          disabled={disabled}\n          className=\"block w-full text-sm text-mw-gray-500 dark:text-mw-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-mw-blue-50 file:text-mw-blue-700 hover:file:bg-mw-blue-100 dark:file:bg-mw-blue-900/20 dark:file:text-mw-blue-300 dark:hover:file:bg-mw-blue-900/30\"\n        />\n\n        {files.length > 0 && (\n          <div className=\"mt-4 space-y-2\">\n            {files.map((file, index) => (\n              <FileItem\n                key={`${file.name}-${index}`}\n                file={file}\n                onRemove={() => removeFile(index)}\n                showPreview={showPreview}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n    )\n  }\n\n  // Default dropzone variant\n  return (\n    <div className={className}>\n      <input\n        ref={fileInputRef}\n        type=\"file\"\n        multiple={multiple}\n        accept={accept}\n        onChange={handleInputChange}\n        disabled={disabled}\n        className=\"hidden\"\n      />\n\n      <DragDropZone\n        onDrop={handleFilesChange}\n        accept={accept}\n        multiple={multiple}\n        disabled={disabled}\n        className=\"w-full\"\n      >\n        <div\n          onClick={openFileDialog}\n          className={cn(\n            'w-full p-8 border-2 border-dashed rounded-lg text-center cursor-pointer transition-colors',\n            disabled\n              ? 'border-mw-gray-200 dark:border-mw-gray-700 bg-mw-gray-50 dark:bg-mw-gray-800 cursor-not-allowed'\n              : 'border-mw-gray-300 dark:border-mw-gray-600 hover:border-mw-blue-400 dark:hover:border-mw-blue-500 hover:bg-mw-blue-50 dark:hover:bg-mw-blue-900/10'\n          )}\n        >\n          <Upload className=\"w-8 h-8 mx-auto mb-4 text-mw-gray-400\" />\n          \n          {children || (\n            <div>\n              <p className=\"text-sm font-medium text-mw-gray-900 dark:text-white mb-1\">\n                Drop files here or click to upload\n              </p>\n              <p className=\"text-xs text-mw-gray-500 dark:text-mw-gray-400\">\n                {accept && `Accepts: ${accept}`}\n                {maxSize && ` - Max size: ${formatFileSize(maxSize)}`}\n                {maxFiles && ` - Max files: ${maxFiles}`}\n              </p>\n            </div>\n          )}\n        </div>\n      </DragDropZone>\n\n      {files.length > 0 && (\n        <div className=\"mt-4 space-y-2\">\n          {files.map((file, index) => (\n            <FileItem\n              key={`${file.name}-${index}`}\n              file={file}\n              onRemove={() => removeFile(index)}\n              showPreview={showPreview}\n            />\n          ))}\n        </div>\n      )}\n    </div>\n  )\n}\n"]}